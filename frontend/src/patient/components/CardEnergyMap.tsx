import React, { useState } from 'react';

export type EnergyStatus = 'Stable' | 'Imbalanced';

interface CardEnergyMapProps {
  status: EnergyStatus;
  activeNodes?: number[];
  tooltipCopy?: string;
}

const CHAKRA_POSITIONS = [
  { x: 161, y: 161, name: 'Crown' },
  { x: 161, y: 206, name: 'Third Eye' },
  { x: 161, y: 298, name: 'Throat' },
  { x: 161, y: 390, name: 'Heart' },
  { x: 161, y: 482, name: 'Solar Plexus' },
  { x: 161, y: 574, name: 'Sacral' },
  { x: 161, y: 666, name: 'Root' },
];

export default function CardEnergyMap({ status, activeNodes = [0, 1, 2, 3, 4, 5, 6] }: CardEnergyMapProps) {
  const [hoveredNode, setHoveredNode] = useState<number | null>(null);

  const statusColor = status === 'Stable' ? 'border-accent-teal' : 'border-priority-high';
  const statusBg = status === 'Stable' ? 'bg-accent-teal/5' : 'bg-priority-high/5';
  const statusShadow = status === 'Stable' ? 'shadow-teal-glow' : '';

  return (
    <div className="flex flex-col gap-6 p-8 bg-bg-card rounded-2xl shadow-card h-full">
      <div className="flex flex-col gap-6">
        <h3 className="text-3xl md:text-4xl font-normal leading-tight">Energy Flow Balanced</h3>
        <div className={`flex items-center justify-center px-4 h-[51px] rounded-full border ${statusColor} ${statusBg} ${statusShadow} w-fit`}>
          <span className="text-2xl md:text-[28px] font-light leading-tight">{status}</span>
        </div>
      </div>
      
      <div className="relative flex items-center justify-center flex-1">
        <svg width="293" height="706" viewBox="0 0 293 706" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M110.238 46.05C104.508 44.0292 105.238 53.8377 105.988 56.9165C106.739 59.9953 108.342 60.5196 109.782 62.6357C111.912 65.7717 111.212 68.069 116.953 66.8393C116.913 69.8896 117.572 72.7873 118.982 75.5135C119.519 76.5525 120.584 77.5629 120.98 78.4589C121.721 80.1365 122.887 91.1555 122.887 93.3955C122.887 93.8626 122.765 94.1676 122.573 94.587C121.71 96.4553 112.835 99.6962 110.36 100.926C103.818 104.167 96.9914 108.704 90.4997 111.583C85.6614 113.727 80.3768 113.765 75.4878 115.653C53.619 124.079 44.0236 149.043 45.8696 169.833C46.0522 171.854 46.955 174.198 47.0462 176.162C47.2491 180.261 43.2223 189.774 41.9442 194.368C39.1548 204.358 36.1626 216.683 35.9699 226.987C35.8887 231.162 37.3595 236.957 36.7509 240.713C36.4263 242.705 34.2557 246.804 33.5152 249.177C28.2509 265.954 28.9203 283.578 27.693 300.87C27.0844 309.448 26.4352 319.438 25.2282 327.874C24.4573 333.259 17.6107 338.826 14.2837 343.201C10.338 348.396 9.93225 358.128 7.57902 364.362C6.66613 366.783 1.82783 373.408 1.74668 374.8C1.61482 377.211 6.65599 377.002 8.39048 376.62C10.7741 376.106 13.7461 372.665 15.3589 370.949C15.5922 370.692 15.3386 370.234 16.2616 370.472L13.5027 394.045C13.5737 397.477 12.2043 406.77 17.6107 400.136C19.406 397.925 20.1769 395.17 20.9681 392.529C21.6172 390.404 24.3457 377.354 24.9543 376.783C25.1471 376.601 26.0194 376.706 25.7354 377.335C25.5832 386.41 24.153 395.522 25.4006 404.568C30.5432 406.97 31.2533 398.268 31.9329 395.036C32.8559 390.604 33.4341 386.086 34.0325 381.606C34.7222 381.52 34.4078 382.454 34.4281 382.902C34.5701 386.305 33.7992 400.346 35.5844 402.233C36.3553 403.053 38.0695 402.957 38.7897 402.138C39.9663 400.803 39.9866 395.427 40.3517 393.492C41.7211 394.236 42.0456 397.905 43.1107 398.506C43.7294 398.859 45.6262 398.887 46.0826 398.325C47.4925 396.571 46.0015 381.663 46.2754 378.088C46.4985 375.2 47.523 372.388 47.8476 369.538C48.7807 361.35 49.4806 347.529 48.1417 339.579C47.8374 337.816 46.9042 335.814 46.7014 334.251C46.2348 330.705 50.9108 321.63 52.3106 317.684C56.4591 305.931 60.6686 293.234 64.1477 281.3C65.7402 275.848 67.5761 269.786 67.9818 264.124C68.4484 257.556 67.3834 248.014 68.4788 241.943C68.8744 239.779 71.4001 236.347 72.4043 234.126C75.5994 227.044 77.8004 219.723 80.032 212.346C81.6549 214.795 82.4967 217.159 82.943 220C84.2515 228.245 85.5904 238.74 86.1483 247.423C86.7062 256.107 85.9353 265.42 86.5337 274.161C86.7265 277.106 88.2074 280.824 88.1567 283.426C88.1161 285.695 86.4019 289.841 85.8846 292.453C84.6573 298.62 84.1399 304.292 85.7324 310.468C78.1149 347.519 68.8947 384.551 72.739 422.632C74.1286 436.31 78.3178 451.256 77.8917 464.973C77.7092 470.768 75.8631 476.926 75.5081 482.779C75.2444 487.163 75.9848 492.206 75.4574 496.467C75.1734 498.735 73.7837 501.299 73.165 503.587C64.5636 535.595 69.057 574.944 70.3858 607.848C71.0349 623.91 72.5361 634.29 63.5797 648.626C57.8082 657.872 44.6727 674.019 36.619 681.559C34.0122 684 30.7461 684.934 28.3523 687.889C26.5062 690.167 25.1673 693.884 26.4048 696.677C26.486 696.868 29.5188 699.346 29.7926 699.451C30.8171 699.851 31.7097 699.575 32.5719 699.813C33.3428 700.023 34.2049 701.272 35.5134 701.51C37.4305 701.863 38.4549 700.576 39.6721 700.9C40.8893 701.224 42.0659 703.569 45.2915 703.826C51.0224 704.284 53.7306 699.499 57.8488 697.43C60.0904 696.305 62.5653 696.315 64.9896 695.238C72.9114 691.711 76.208 683.485 81.4114 678.013C86.6149 672.542 94.1614 670.55 99.1823 664.65C106.475 656.099 100.004 652.239 100.004 643.813C100.004 642.802 100.734 642.554 100.968 641.83C102.235 637.95 99.8619 634.09 99.5678 630.153C98.7665 619.42 102.814 598.907 105.228 587.926C107.875 575.897 111.344 569.434 116.233 558.558C120.929 548.102 121.071 537.035 120.108 525.835C119.519 518.953 117.298 511.327 116.963 504.674C116.791 501.328 117.724 501.843 118.88 499.431C123.455 489.88 122.573 481.625 123.272 471.636C123.769 464.439 129.409 456.251 132.249 449.264C140.13 429.876 143.346 409.087 148.742 389.031C149.594 388.755 149.31 389.756 149.442 390.213C155.193 409.954 158.764 430.057 166.919 449.15C171.088 458.92 175.53 463.905 176.575 474.962C177.285 482.578 176.879 488.679 179.628 496.219C181.87 502.338 183.797 502.262 183.29 509.849C182.509 521.574 180.074 530.477 181.322 542.888C182.742 556.985 190.005 564.02 194.062 576.574C198.221 589.442 202.826 613.053 203.434 626.417C203.657 631.297 200.868 637.235 202.46 641.439C202.775 642.268 203.769 643.241 203.83 643.87C204.043 646.11 202.4 651.448 202.237 654.231C201.527 666.613 208.699 667.9 217.787 674.172C226.875 680.444 229.127 692.045 240.69 696.077C242.354 696.658 243.956 696.639 245.579 697.421C249.515 699.317 252.578 705.018 258.086 704.531C261.311 704.246 263.37 701.186 264.537 700.89C265.906 700.547 266.931 702.015 269.385 701.024C271.373 700.223 271.14 700.213 273.443 699.642C274.842 699.289 276.688 697.497 277.469 696.363C278.555 694.79 277.449 694.704 277.368 693.522C277.165 690.824 277.794 690.92 275.867 688.26C273.94 685.601 272.905 685.896 270.603 684.295C265.277 680.597 259.364 672.008 255.236 666.813C249.728 659.883 242.77 651.648 238.023 644.394C229.898 631.964 232.829 611.47 233.032 597.077C233.428 568.433 235.274 533.937 227.798 506.246C226.916 502.977 224.786 498.411 224.4 495.332C223.924 491.529 224.573 487.039 224.35 483.122C223.944 476.049 221.854 469.052 221.57 461.97C221.002 447.996 225.07 433.489 225.922 419.629C227.545 393.206 223.437 367.146 217.909 341.419C215.829 331.753 211.63 319.486 210.565 310.087C210.139 306.331 211.255 301.632 210.91 297.514C210.423 291.786 207.319 286.209 207.765 280.442C208.972 264.781 208.313 249.025 209.733 233.297C210.139 228.846 210.717 216.654 213.172 213.528C213.375 213.261 213.496 212.517 214.074 213.061C214.277 213.251 215.119 217.522 215.373 218.341C216.874 223.212 218.598 227.959 220.718 232.62C221.611 234.603 224.268 238.33 224.644 240.065C225.81 245.431 224.755 255.545 225.131 261.512C225.435 266.345 226.652 271.644 227.92 276.334C232.941 294.883 240.153 313.661 246.837 331.725C243.48 342.944 244.332 355.717 245.275 367.308C245.498 369.986 246.583 372.703 246.857 375.105C247.588 381.615 245.792 390.337 246.959 396.552C247.009 396.857 247.131 397.505 247.506 397.581C247.882 397.658 250.144 397.639 250.347 397.515C250.661 397.324 251.685 393.073 252.761 392.739C253.126 394.579 253.349 403.977 257.335 401.299C257.934 400.889 258.684 398.373 258.684 397.743V380.853L263.979 403.158C264.943 404.301 266.637 403.901 267.803 403.262C268.919 394.14 267.458 384.847 267.773 375.658C268.543 375.791 268.412 376.449 268.574 376.945C270.136 381.796 272.996 399.049 277.642 401.089C280.867 402.5 279.64 397.829 279.61 396.628C279.387 387.468 278.119 378.451 277.236 369.348C279.65 371.33 281.466 374.638 284.813 375.4C286.568 375.791 291.619 376.239 291.457 373.646C291.376 372.264 287.501 367.212 286.649 365.506C283.119 358.481 283.687 348.863 279.143 342.496C276.658 339.026 268.98 331.934 268.249 328.236C267.184 322.784 266.667 314.729 266.19 309.019C264.628 290.375 265.531 269.5 260.713 251.436C259.749 247.852 256.808 242.143 256.341 239.216C255.966 236.881 257.011 234.164 257.122 231.829C257.761 218.684 254.556 205.197 251.067 192.567C249.576 187.191 246.228 179.946 246.441 174.646C246.594 170.881 247.527 166.621 247.638 162.779C248.267 141.132 234.807 118.694 211.701 113.012C198.87 109.857 193.727 106.235 182.336 100.897C178.005 98.8669 173.248 97.3418 169.099 95.1494C168.065 93.5481 168.744 83.9016 169.079 81.5186C169.647 77.4294 171.108 76.1617 172.071 72.8254C172.355 71.8436 172.792 67.4017 173.015 67.2111C173.167 67.0776 175.784 67.173 176.96 66.2769C178.036 65.4572 178.279 63.7224 179.04 62.6643C179.912 61.4347 181.332 60.4338 181.991 59.1279C183.29 56.5733 184.061 48.3663 181.88 46.3646C180.024 44.6488 178.462 46.6982 178.117 46.3741L180.125 32.8291C179.283 10.0571 156.37 -2.87787 133.72 2.97479C113.647 8.16974 104.092 27.7771 110.198 46.0119L110.238 46.05ZM110.238 46.05C110.147 46.1358 110.299 46.4313 110.431 46.4217C110.867 46.3931 110.421 45.8784 110.238 46.05Z" stroke="#07D9E0" stroke-width="2" stroke-miterlimit="10"/>
<path d="M109.771 45.0952C109.816 45.0528 109.878 45.0519 109.938 45.0757L109.965 45.4663L109.915 45.4546C109.815 45.4069 109.722 45.2315 109.749 45.1353L109.771 45.0952Z" stroke="#07D9E0"/>
<path d="M147 19C149.761 19 152 16.7614 152 14C152 11.2386 149.761 9 147 9C144.239 9 142 11.2386 142 14C142 16.7614 144.239 19 147 19Z" fill="#7BC8B8"/>
<path d="M147 68C149.761 68 152 65.7614 152 63C152 60.2386 149.761 58 147 58C144.239 58 142 60.2386 142 63C142 65.7614 144.239 68 147 68Z" fill="#7BC8B8"/>
<path d="M147 134C149.761 134 152 131.761 152 129C152 126.239 149.761 124 147 124C144.239 124 142 126.239 142 129C142 131.761 144.239 134 147 134Z" fill="#7BC8B8"/>
<path d="M147 202C149.761 202 152 199.761 152 197C152 194.239 149.761 192 147 192C144.239 192 142 194.239 142 197C142 199.761 144.239 202 147 202Z" fill="#7BC8B8"/>
<path d="M147 291C149.761 291 152 288.761 152 286C152 283.239 149.761 281 147 281C144.239 281 142 283.239 142 286C142 288.761 144.239 291 147 291Z" fill="#7BC8B8"/>
<path d="M147 329C149.761 329 152 326.761 152 324C152 321.239 149.761 319 147 319C144.239 319 142 321.239 142 324C142 326.761 144.239 329 147 329Z" fill="#7BC8B8"/>
<path d="M147 382C149.761 382 152 379.761 152 377C152 374.239 149.761 372 147 372C144.239 372 142 374.239 142 377C142 379.761 144.239 382 147 382Z" fill="#7BC8B8"/>
</svg>


        {hoveredNode !== null && (
          <div className="absolute top-4 left-4 bg-black/80 text-white px-3 py-2 rounded-lg text-sm">
            {CHAKRA_POSITIONS[hoveredNode].name}
          </div>
        )}
      </div>
    </div>
  );
}
